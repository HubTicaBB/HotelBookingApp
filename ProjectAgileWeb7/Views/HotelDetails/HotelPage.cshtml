@model ProjectAgileWeb7.Models.Hotel
<partial name="_SearchPartial" , model="new HotelsViewModel { }" />

@{
    var RoomPrices = new Dictionary<RoomType, decimal>();

    foreach (var item in Model.Rooms)
    {
        if (RoomPrices.ContainsKey(item.RoomType))
            continue;
        else
            RoomPrices.Add(item.RoomType, item.RoomPrice);
    }
}

<div>
    <div class="card mb-4 border-0">
        <h1 class="hotel-name ">
            @Model.Name
            <span class="float-right">
                @for (var i = 0; i < Model.Stars; i++)
                {
                    <i class="fas fa-star text-warning "></i>
                }
            </span>
        </h1>
    </div>

</div>

<div class="d-flex container-hotel">

    <div class="carousel-container">
        <div class="card-deck">
            <div class="card mt-4">
                <div class="card-body d-flex">
                    <div class="m-auto img">
                        <!--Carousel Wrapper-->
                        <div id="carousel-thumb" class="carousel slide carousel-fade carousel-thumbnails" data-ride="carousel">
                            <!--Slides-->
                            <div class="carousel-inner" role="listbox">
                                <div class="carousel-item active">
                                    <img class="d-block w-100" src="https://mdbootstrap.com/img/Photos/Slides/img%20(88).jpg"
                                         alt="First slide">
                                </div>
                                <div class="carousel-item">
                                    <img class="d-block w-100" src="https://mdbootstrap.com/img/Photos/Slides/img%20(121).jpg"
                                         alt="Second slide">
                                </div>
                                <div class="carousel-item">
                                    <img class="d-block w-100" src="https://mdbootstrap.com/img/Photos/Slides/img%20(31).jpg"
                                         alt="Third slide">
                                </div>
                            </div>
                            <!--/.Slides-->
                            <!--Controls-->
                            <a class="carousel-control-prev" href="#carousel-thumb" role="button" data-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="sr-only">Previous</span>
                            </a>
                            <a class="carousel-control-next" href="#carousel-thumb" role="button" data-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="sr-only">Next</span>
                            </a>
                            <!--/.Controls-->
                            @*
                                <ul class="carousel-indicators">
                                    <li data-target="#carousel-thumb" data-slide-to="0" class="active">
                                        <img src="https://mdbootstrap.com/img/Photos/Others/Carousel-thumbs/img%20(88).jpg" width="100">
                                    </li>
                                    <li data-target="#carousel-thumb" data-slide-to="1">
                                        <img src="https://mdbootstrap.com/img/Photos/Others/Carousel-thumbs/img%20(121).jpg" width="100">
                                    </li>
                                    <li data-target="#carousel-thumb" data-slide-to="2">
                                        <img src="https://mdbootstrap.com/img/Photos/Others/Carousel-thumbs/img%20(31).jpg" width="100">
                                    </li>
                                </ul>
                            *@
                        </div>
                        <!--/.Carousel Wrapper-->
                    </div>
                </div>
                <p class="card-body">
                    @Model.Description
                </p>
                <ul class="card-footer">
                    <h4>Services offered:</h4>&nbsp;
                    @foreach (var facility in Model.HotelFacilities)
                    {
                        <li class="list-group-item">@facility.Facility.Name</li>
                    }
                </ul>
            </div>
        </div>
        &nbsp;


        <div class="border p-3 mt-3">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Room Type:</th>
                        <th>Price per night:</th>
                        <th>Rooms:</th>
                        <th></th>
                    </tr>
                    @foreach (var pair in RoomPrices)
                    {
                        <tr>
                            <td>
                                @Html.DisplayFor(p => pair.Key)
                            </td>
                            <td>
                                @Html.DisplayFor(p => pair.Value)
                            </td>
                            <td>
                                @Model.Rooms.Where(t => t.RoomType == pair.Key).Count()
                            </td>
                            <td>
                                <a asp-action="BookRoom" asp-controller="HotelDetails" asp-route-roomType="@pair.Key" class="btn btn-success">Book</a>
                            </td>
                        </tr>
                    }
                </thead>
            </table>
        </div>

    </div>
    <div class="card weather-card mt-4">
        <input type="hidden" id="latitude" asp-for=@Model.Latitude />
        <input type="hidden" id="longitude" asp-for=@Model.Longitude />

        <div class="card-body pb-3">
            <div class="mb-3">

                <i class="fas fa-temperature-low fa-2x text-primary "></i>
                <span id="location" class="card-title font-weight-bold h4 "></span>
            </div>
            <div>
                <span id="today" class="card-text mr-2"></span>
                <span id="time" class="card-text"></span>
            </div>
            <div id="temperature" class="display-3"></div>
            <p id="weather"></p>
            <div>
                <span id="weather-icon" class="mr-2"></span>
                <span class="text-capitalize" id="description"></span>


            </div>
            <div>
                <span class="mr-2"><i class="fas fa-wind fa-2x text-info"></i></span>
                <span id="wind"></span>
                <span>m/h</span>
            </div>

        </div>

    </div>

</div>
